# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI Assistant —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ

OpenAI Assistants API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∏–∑ PDF —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `file_search`. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π RAG (Retrieval-Augmented Generation) –æ—Ç OpenAI
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö PDF (–¥–æ 512MB)
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞

–°–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `openai >= 1.55.0`:

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
pip install -r tools/requirements.txt

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
pip install openai>=1.55.0 python-dotenv>=1.0.0
```

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–≤–µ–∂–∞—è –≤–µ—Ä—Å–∏—è openai (>= 1.55.0)

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ PDF

–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à PDF —Ñ–∞–π–ª —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø–∞–ø–∫–µ `knowledge/`):

```bash
mkdir -p knowledge
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à PDF –≤ knowledge/numerology.pdf
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–≥—Ä—É–∑–∏—Ç PDF –≤ OpenAI
2. –°–æ–∑–¥–∞—Å—Ç Vector Store
3. –°–æ–∑–¥–∞—Å—Ç Assistant —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
4. –í—ã–≤–µ–¥–µ—Ç ASSISTANT_ID –¥–ª—è .env

```bash
python tools/setup_assistant.py knowledge/numerology.pdf
```

**–í—ã–≤–æ–¥:**
```
üìÑ –ó–∞–≥—Ä—É–∂–∞–µ–º PDF: numerology.pdf (5.00 MB)
‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω: file-abc123...
üîß –°–æ–∑–¥–∞–µ–º Vector Store...
‚úÖ Vector Store —Å–æ–∑–¥–∞–Ω: vs-xyz789...
‚è≥ –û–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏...
‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –§–∞–π–ª–æ–≤ –≤ –±–∞–∑–µ: 1
ü§ñ –°–æ–∑–¥–∞–µ–º Assistant...
‚úÖ Assistant —Å–æ–∑–¥–∞–Ω: asst-def456...

============================================================
üéâ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
============================================================

üìã –î–æ–±–∞–≤—å—Ç–µ –≤ .env —Ñ–∞–π–ª:

OPENAI_ASSISTANT_ID=asst-def456...

üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
   - File ID: file-abc123...
   - Vector Store ID: vs-xyz789...
   - Assistant ID: asst-def456...

üí° –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ .env –±–æ—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ .env

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ASSISTANT_ID –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```bash
# .env
OPENAI_API_KEY=sk-...
OPENAI_ASSISTANT_ID=asst-def456...
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker-compose restart app
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–µ–∑ Assistant ID (—Å—Ç–∞—Ä—ã–π —Ä–µ–∂–∏–º)
```python
GPT4Client(api_key="sk-...")
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Chat Completions API
# –ë–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
```

### –° Assistant ID (–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º)
```python
GPT4Client(api_key="sk-...", assistant_id="asst-...")
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Assistants API + file_search
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ PDF
```

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞

1. –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π Thread –¥–ª—è –∑–∞–∫–∞–∑–∞
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. Assistant –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å
   - –ò—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ PDF
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PDF –æ—Ç—á–µ—Ç–∞

## –°—Ç–æ–∏–º–æ—Å—Ç—å

### –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0.10/GB
- **–î–ª—è 5MB PDF:** ~$0.0005 (–º–µ–Ω—å—à–µ —Ü–µ–Ω—Ç–∞)

### –•—Ä–∞–Ω–µ–Ω–∏–µ
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0.10/GB/–¥–µ–Ω—å
- **–î–ª—è 5MB PDF:** ~$0.0005/–¥–µ–Ω—å (~$0.15/–º–µ—Å—è—Ü)

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
- **Input:** $10/1M —Ç–æ–∫–µ–Ω–æ–≤ (–ø—Ä–æ–º–ø—Ç + —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ PDF)
- **Output:** $30/1M —Ç–æ–∫–µ–Ω–æ–≤ (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç)
- **–ü—Ä–∏–º–µ—Ä–Ω–æ:** $0.50-0.70 –∑–∞ –æ—Ç—á–µ—Ç

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å PDF:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –Ω–æ–≤—ã–º PDF
python tools/setup_assistant.py knowledge/numerology_v2.pdf

# 2. –û–±–Ω–æ–≤–∏—Ç–µ ASSISTANT_ID –≤ .env
# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose restart app
```

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Assistant

–ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É —Ä–µ–∂–∏–º—É –±–µ–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:

```bash
# –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ .env
# OPENAI_ASSISTANT_ID=asst-...
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Chat Completions API.

## –õ–æ–≥–∏

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–∂–Ω–æ –≤ –ª–æ–≥–∞—Ö:

```bash
docker-compose logs -f app | grep -i assistant

# –£—Å–ø–µ—à–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:
# INFO: –°–æ–∑–¥–∞–Ω thread: thread_abc123
# INFO: –ó–∞–ø—É—â–µ–Ω run: run_xyz789
# INFO: Run –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
# INFO: GPT-4 Assistant –æ—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (thread: thread_abc123)
```

## Troubleshooting

### –û—à–∏–±–∫–∞ "AttributeError: 'AsyncBeta' object has no attribute 'vector_stores'"

**–ü—Ä–∏—á–∏–Ω–∞:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `openai`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install --upgrade openai
# –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
pip install openai>=1.55.0
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é:
```bash
python -c "import openai; print(openai.__version__)"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 1.55.0
```

### –û—à–∏–±–∫–∞ "Assistant run failed"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ASSISTANT_ID –≤ .env
- –ù–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ OpenAI
- –õ–∏–º–∏—Ç—ã API –∫–ª—é—á–∞

### PDF –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 512MB
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, TXT, DOCX, –∏ –¥—Ä.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

- Assistants API –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 10-30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç.–∫. –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å timeout

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [OpenAI Assistants API Documentation](https://platform.openai.com/docs/assistants/overview)
- [File Search Guide](https://platform.openai.com/docs/assistants/tools/file-search)
